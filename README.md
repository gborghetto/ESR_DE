# Quintessence Potential Exploration with Symbolic Regression and Cobaya

This project provides a framework for discovering and testing novel quintessence scalar field potentials against cosmological data. It uses a symbolic regression (ESR) tool to generate candidate functions, and the `cobaya` MCMC sampler to perform a Bayesian analysis on each valid potential.

## Project Structure and Workflow

The analysis is performed through a pipeline of interconnected scripts and modules. The overall flow of information is as follows:

[ESR Function File] -> [run_script.py] -> (Launches multiple Cobaya jobs)
|
V
[analyze_results.py] <- [Output Chains & .minimum.txt Files] <- [Cobaya Run]
|
V
[Custom Theory] -> [Modified CAMB] -> [Likelihoods]

### 1. Symbolic Potential Generation

The starting point is a text file (e.g., `unique_equations.txt`) containing a large number of candidate mathematical functions generated by an external symbolic regression tool. Each line in this file represents a potential $V(\phi)$ to be tested.

### 2. The Main Run Script (`run_script.py`)

This script is the master controller of the entire analysis pipeline. It is responsible for:
-   **Looping:** Iterating through each potential function discovered by the ESR tool.
-   **Validation:** Performing a series of checks on each function to filter out mathematically invalid or physically uninteresting forms (e.g., constants, functions with singularities).
-   **Analysis:** Symbolically analyzing each valid function to identify and handle parameter degeneracies. For instance, it detects purely additive constant parameters (e.g., `a1` in `V(\phi) = a1 + f(\phi, a0)`) and configures the sampler to fix them to zero, improving efficiency.
-   **Job Configuration:** Dynamically creating the `cobaya` input dictionary (`info`) for each valid potential. This involves setting up the likelihoods, sampler, and the parameters to be sampled (both cosmological and those specific to the potential, like `a0`).
-   **Execution:** Launching the `cobaya` MCMC sampler and a minimizer for each configured job.

### 3. The Custom Cobaya Theory (`CambQuintessenceESR.py`)

This module acts as the crucial bridge between the symbolic functions and the CAMB Boltzmann solver. During a `cobaya` run, its role is to:
-   Receive the specific function string and its sampled parameters (e.g., `a0`, `a1`) from the `cobaya` framework.
-   Use a helper utility (`create_potential_table`) to convert the symbolic function and its current parameter values into a high-resolution numerical table of the potential and its first two derivatives: `[phi, V(phi), V'(phi), V''(phi)]`.
-   Pass this numerical table to a modified version of CAMB that is equipped to use a tabulated potential to solve the background evolution of the quintessence field.

### 4. The Analysis Script (`analyze_results.py`)

After all the `cobaya` runs are complete, this script is used for post-processing and discovery. It automatically:
-   Scans all the output directories generated by the `run_script.py`.
-   Loads the best-fit point (from the `.minimum.txt` file) for each successfully completed run.
-   Ranks all the tested potential models based on a goodness-of-fit metric (e.g., the total $\chi^2$).
-   Presents a final summary table of the top-performing models, showing the mathematical form of the potential, its best-fit parameters, and its $\chi^2$ value.

## How to Use

1.  **Generate Potentials:** Use your ESR tool to create a file of candidate function strings.
2.  **Launch the Analysis:** Execute the main script from your terminal. It will begin iterating through the functions and launching `cobaya` jobs.
    ```bash
    python run_script.py
    ```
3.  **Analyze Results:** Once the runs have finished, execute the analysis script to find the best-performing models.
    ```bash
    python analyze_results.py
    ```
